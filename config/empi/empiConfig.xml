
<config>
    <!-- JNDI resource name for EMPI database -->
    <jndi-resource-name>jdbc/hieos-empi</jndi-resource-name>

    <!-- Name of match algorithm to use. -->
    <match-algorithm>com.vangent.hieos.empi.match.FRILMatchAlgorithm</match-algorithm>

    <!-- Enterprise ID configuration items. -->
    <euid-config>
        <euid-assign-enabled>false</euid-assign-enabled>
        <euid-universalid>1.3.6.1.4.1.21367.13.20.1000</euid-universalid>
        <euid-universalid-type>ISO</euid-universalid-type>
    </euid-config>

    <!-- Available transform functions -->
    <transform-functions>
        <transform-function>
            <name>DoubleMetaphone</name>
            <class>com.vangent.hieos.empi.transform.DoubleMetaphoneTransformFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>Metaphone</name>
            <class>com.vangent.hieos.empi.transform.MetaphoneTransformFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>RefinedSoundex</name>
            <class>com.vangent.hieos.empi.transform.RefinedSoundexTransformFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>Soundex</name>
            <class>com.vangent.hieos.empi.transform.SoundexTransformFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>Caverphone1</name>
            <class>com.vangent.hieos.empi.transform.Caverphone1TransformFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>Caverphone2</name>
            <class>com.vangent.hieos.empi.transform.Caverphone2TransformFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>HL7Date</name>
            <class>com.vangent.hieos.empi.transform.HL7DateTransformFunction</class>
        </transform-function>
        <transform-function>
            <name>Prefix</name>
            <class>com.vangent.hieos.empi.transform.PrefixTransformFunction</class>
            <parameters>
                <parameter>
                    <name>prefix-length</name>
                    <value>3</value>
                </parameter>
            </parameters>
        </transform-function>
        <transform-function>
            <name>NormalizeCase</name>
            <class>com.vangent.hieos.empi.transform.NormalizeCaseTransformFunction</class>
        </transform-function>
    </transform-functions>

    <!-- Available distance functions -->
    <distance-functions>
        <distance-function>
            <name>Levenshtein</name>
            <class>com.vangent.hieos.empi.distance.LevenshteinDistanceFunction</class>
            <parameters>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
                <parameter>
                    <name></name>
                    <value></value>
                </parameter>
            </parameters>
        </distance-function>
        <distance-function>
            <name>ExactMatch</name>
            <class>com.vangent.hieos.empi.distance.ExactMatchDistanceFunction</class>
            <!--<parameters>
                <parameter>
                    <name>truncate-length</name>
                    <value>5</value>
                </parameter>
            </parameters>-->
        </distance-function>
    </distance-functions>

    <!-- List of fields to support blocking and matching functions -->
    <fields>
        <field>
            <name>familyNameDoubleMetaphone</name>
            <source-object-path>subjectNames[0].familyName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>DoubleMetaphone</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field1</match-db-column>
        </field>
        <field>
            <name>givenNameDoubleMetaphone</name>
            <source-object-path>subjectNames[0].givenName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>DoubleMetaphone</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field2</match-db-column>
        </field>
        <field>
            <name>familyName</name>
            <source-object-path>subjectNames[0].familyName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field3</match-db-column>
        </field>
        <field>
            <name>givenName</name>
            <source-object-path>subjectNames[0].givenName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field4</match-db-column>
        </field>
        <field>
            <name>birthTime</name>
            <source-object-path>birthTime</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>HL7Date</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field5</match-db-column>
        </field>
        <field>
            <name>gender</name>
            <source-object-path>gender.code</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field6</match-db-column>
        </field>
        <field>
            <name>familyNameSoundex</name>
            <source-object-path>subjectNames[0].familyName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>Soundex</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field7</match-db-column>
        </field>
        <field>
            <name>givenNameSoundex</name>
            <source-object-path>subjectNames[0].givenName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>Soundex</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field8</match-db-column>
        </field>
        <field>
            <name>streetAddressLine1</name>
            <source-object-path>addresses[0].streetAddressLine1</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field9</match-db-column>
        </field>
        <field>
            <name>city</name>
            <source-object-path>addresses[0].city</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field10</match-db-column>
        </field>
        <field>
            <name>state</name>
            <source-object-path>addresses[0].state</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field11</match-db-column>
        </field>
        <field>
            <name>postalCode</name>
            <source-object-path>addresses[0].postalCode</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>NormalizeCase</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field12</match-db-column>
        </field>
        <field>
            <name>familyNameCaverphone2</name>
            <source-object-path>subjectNames[0].familyName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>Caverphone2</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field13</match-db-column>
        </field>
        <field>
            <name>familyNameCaverphone1</name>
            <source-object-path>subjectNames[0].familyName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>Caverphone1</name>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field14</match-db-column>
        </field>
        <field>
            <name>familyNamePrefix</name>
            <source-object-path>subjectNames[0].familyName</source-object-path>
            <transform-functions>
                <transform-function>
                    <name>Prefix</name>
                    <parameters>
                        <parameter>
                            <name>prefix-length</name>
                            <value>2</value>
                        </parameter>
                    </parameters>
                </transform-function>
            </transform-functions>
            <match-db-column>match_field15</match-db-column>
        </field>
    </fields>
    
    <!-- First pass "blocking" configuration -->
    <blocking-config>
        <blocking-pass>
            <blocking-fields>
                <blocking-field>
                    <name>familyNameSoundex</name>
                    <required>true</required>
                </blocking-field>
                <blocking-field>
                    <name>givenNameSoundex</name>
                    <required>false</required>
                </blocking-field>
                <blocking-field>
                    <name>gender</name>
                    <required>false</required>
                </blocking-field>
            </blocking-fields>
        </blocking-pass>
        <blocking-pass>
            <blocking-fields>
                <blocking-field>
                    <name>streetAddressLine1</name>
                    <required>true</required>
                </blocking-field>
                <blocking-field>
                    <name>city</name>
                    <required>true</required>
                </blocking-field>
                <blocking-field>
                    <name>state</name>
                    <required>true</required>
                </blocking-field>
                <blocking-field>
                    <name>postalCode</name>
                    <required>true</required>
                </blocking-field>
            </blocking-fields>
        </blocking-pass>
    </blocking-config>
    
    <match-config>
        <accept-threshold>0.9</accept-threshold>
        <reject-threshold>0.9</reject-threshold>
        <match-fields>
            <match-field>
                <name>givenName</name>
                <accept-threshold>0.8</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>Levenshtein</name>
                </distance-function>
            </match-field>
            <match-field>
                <name>familyName</name>
                <accept-threshold>0.8</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>Levenshtein</name>
                </distance-function>
            </match-field>
            <match-field>
                <name>birthTime</name>
                <accept-threshold>1.0</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>ExactMatch</name>
                </distance-function>
            </match-field>
            <match-field>
                <name>streetAddressLine1</name>
                <accept-threshold>0.8</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>Levenshtein</name>
                </distance-function>
            </match-field>
            <match-field>
                <name>city</name>
                <accept-threshold>0.8</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>Levenshtein</name>
                </distance-function>
            </match-field>
            <match-field>
                <name>state</name>
                <accept-threshold>0.8</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>Levenshtein</name>
                </distance-function>
            </match-field>
            <match-field>
                <name>postalCode</name>
                <accept-threshold>0.8</accept-threshold>
                <reject-threshold>0.0</reject-threshold>
                <weight>1.0</weight>
                <distance-function>
                    <name>Levenshtein</name>
                </distance-function>
            </match-field>
        </match-fields>
    </match-config>

    <update-notification-enabled>true</update-notification-enabled>

    <!-- List of cross reference consumers -->
    <cross-reference-consumers>
        <cross-reference-consumer>
            <name>NIST PIX PDQ Tool</name>
            <enabled>true</enabled>
            <device-id>2.16.840.1.113883.3.72.6.5.100.207</device-id>
            <device-name>2.16.840.1.113883.3.72.6.1</device-name>
            <interested-identifier-domains>
                <identifier-domain>
                    <universal-id>1.3.6.1.4.1.21367.13.20.1000</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>IHE_1000</namespace-id>
                </identifier-domain>
                <identifier-domain>
                    <universal-id>2.16.840.1.113883.3.72.5.9.1</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>NIST2010</namespace-id>
                </identifier-domain>
                <identifier-domain>
                    <universal-id>2.16.840.1.113883.3.72.5.9.2</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>NIST2010-2</namespace-id>
                </identifier-domain>
                <identifier-domain>
                    <universal-id>2.16.840.1.113883.3.72.5.9.3</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>NIST2010-3</namespace-id>
                </identifier-domain>
            </interested-identifier-domains>
        </cross-reference-consumer>
        <cross-reference-consumer>
            <name>BOGUS DEVICE</name>
            <enabled>true</enabled>
            <device-id>bogus.device.id</device-id>
            <device-name>bogus.device.name</device-name>
            <interested-identifier-domains>
                <identifier-domain>
                    <universal-id>1.3.6.1.4.1.21367.13.20.1000</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>IHE_1000</namespace-id>
                </identifier-domain>
                <identifier-domain>
                    <universal-id>2.16.840.1.113883.3.72.5.9.1</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>NIST2010</namespace-id>
                </identifier-domain>
                <identifier-domain>
                    <universal-id>2.16.840.1.113883.3.72.5.9.2</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>NIST2010-2</namespace-id>
                </identifier-domain>
                <identifier-domain>
                    <universal-id>2.16.840.1.113883.3.72.5.9.3</universal-id>
                    <universal-id-type>ISO</universal-id-type>
                    <namespace-id>NIST2010-3</namespace-id>
                </identifier-domain>
            </interested-identifier-domains>
        </cross-reference-consumer>
        <!-- more cross-reference-consumer(s) go here .... -->
    </cross-reference-consumers>
</config>